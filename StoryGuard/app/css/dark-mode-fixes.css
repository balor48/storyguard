/* Dark Theme Book Analysis Fixes */

/* Common dark mode colors */
:root {
  --dark-bg: #343a40;
  --dark-bg-lighter: #495057;
  --dark-bg-darker: #2d333b;
  --dark-border: #6c757d;
  --dark-text: #f8f9fa;
  --dark-accent: #3498db;
  --dark-accent-hover: #2980b9;
}

/* Base dark mode styles */
body.dark-mode {
  background-color: var(--dark-bg);
  color: var(--dark-text);
}

/* ===== RELATIONSHIP STYLES ===== */

/* Relationship UI - Main containers */
body.dark-mode .create-relationship-section,
body.dark-mode #relationshipCreatorContainer,
body.dark-mode .relationship-list-container,
body.dark-mode .relationships-container,
body.dark-mode .character-relationships-section,
body.dark-mode .relationship-visualization,
body.dark-mode .relationship-manager-container,
body.dark-mode #relationships-tab .search-container {
  background-color: var(--dark-bg) !important;
  color: var(--dark-text) !important;
  border-color: var(--dark-border) !important;
}

/* Relationship Manager specific styles */
body.dark-mode .relationship-manager-container {
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2) !important;
}

body.dark-mode .relationship-manager-container .card {
  border-color: var(--dark-border) !important;
  background-color: var(--dark-bg-darker) !important;
}

body.dark-mode .relationship-manager-container .card-header {
  background-color: var(--dark-bg) !important;
  border-color: var(--dark-border) !important;
}

/* Character selection and dropdowns */
body.dark-mode select[id^="character"],
body.dark-mode #relationshipTypeSelect,
body.dark-mode #relationshipSelector,
body.dark-mode .relationship-type-dropdown,
body.dark-mode .form-control {
  background-color: var(--dark-bg-lighter) !important;
  color: var(--dark-text) !important;
  border: 1px solid var(--dark-border) !important;
}

/* Character select list */
body.dark-mode .character-select-list {
  background-color: var(--dark-bg-darker) !important;
  color: var(--dark-text) !important;
  border: 1px solid var(--dark-border) !important;
}

body.dark-mode .character-select-list option {
  background-color: var(--dark-bg-darker) !important;
  color: var(--dark-text) !important;
}

body.dark-mode .character-select-list option:hover {
  background-color: var(--dark-bg-lighter) !important;
}

/* Headers and labels */
body.dark-mode .create-relationship-section h2,
body.dark-mode .create-relationship-section h3,
body.dark-mode .create-relationship-section label,
body.dark-mode .character-relationships-section h2,
body.dark-mode .relationship-manager-container h3 {
  color: var(--dark-text) !important;
}

/* Character select headers */
body.dark-mode .character-select-header {
  background-color: var(--dark-accent) !important;
  color: #fff !important;
}

/* Relationship table styles */
body.dark-mode .relationship-table,
body.dark-mode #relationshipTable {
  background-color: var(--dark-bg) !important;
  color: var(--dark-text) !important;
  border-color: var(--dark-border) !important;
}

body.dark-mode .relationship-table th,
body.dark-mode #relationshipTable th,
body.dark-mode .relationship-manager-container th {
  background-color: var(--dark-bg-darker) !important;
  color: var(--dark-text) !important;
  border-color: var(--dark-border) !important;
}

body.dark-mode .relationship-table td,
body.dark-mode #relationshipTable td,
body.dark-mode .relationship-manager-container td {
  border-color: var(--dark-border) !important;
  color: var(--dark-text) !important;
}

/* Row hover and selection states */
body.dark-mode .relationship-manager-container .selected-row {
  background-color: var(--dark-bg-lighter) !important;
}

body.dark-mode .relationship-manager-container tbody tr:hover,
body.dark-mode .relationship-table tr:hover td,
body.dark-mode #relationshipTable tr:hover td {
  background-color: var(--dark-bg-lighter) !important;
}

/* Relationship type badges */
body.dark-mode .relationship-type {
  text-shadow: 0px 0px 3px rgba(0, 0, 0, 0.7) !important;
  border-color: rgba(255, 255, 255, 0.2) !important;
}

/* Relationship buttons */
body.dark-mode .add-relationship-btn,
body.dark-mode #addRelationshipBtn:not(:disabled),
body.dark-mode #addRelationshipBtn.enabled {
  background-color: #2ecc71 !important; /* Green color for enabled state */
  color: #fff !important;
  border: none !important;
}

body.dark-mode .add-relationship-btn:hover,
body.dark-mode #addRelationshipBtn:hover:not(:disabled),
body.dark-mode #addRelationshipBtn.enabled:hover {
  background-color: #27ae60 !important; /* Darker green on hover */
}

body.dark-mode #addRelationshipBtn:disabled {
  background-color: #e74c3c !important; /* Red color for disabled state */
  opacity: 0.6 !important;
}

body.dark-mode .clear-btn {
  background-color: var(--dark-bg-lighter) !important;
  color: var(--dark-text) !important;
  border: 1px solid var(--dark-border) !important;
}

body.dark-mode .clear-btn:hover {
  background-color: var(--dark-bg-darker) !important;
}

/* Add New Relationship Type styles */
body.dark-mode .relationship-option.add-new-relationship-type {
  background-color: var(--dark-bg-lighter) !important;
  color: var(--dark-text) !important;
  border: 1px solid var(--dark-border) !important;
}

body.dark-mode .relationship-option.add-new-relationship-type:hover {
  background-color: var(--dark-bg-darker) !important;
}

/* Relationship type dialog */
body.dark-mode #addRelationshipTypeDialog .modal-content {
  background-color: var(--dark-bg) !important;
  color: var(--dark-text) !important;
  box-shadow: 0 0 15px rgba(0, 0, 0, 0.5) !important;
}

body.dark-mode #addRelationshipTypeDialog .modal-header {
  border-bottom-color: var(--dark-border) !important;
}

body.dark-mode #addRelationshipTypeDialog .modal-body,
body.dark-mode #addRelationshipTypeDialog .modal-footer {
  background-color: var(--dark-bg) !important;
  border-color: var(--dark-border) !important;
}

/* Common container styles */
body.dark-mode .analysis-results-container,
body.dark-mode .analysis-options,
body.dark-mode .book-upload-section,
body.dark-mode .results-header,
body.dark-mode .results-content,
body.dark-mode .table-container,
body.dark-mode .tab-content,
body.dark-mode .advanced-search,
body.dark-mode .search-container,
body.dark-mode .world-building-viz-container,
body.dark-mode .plot-arc-container,
body.dark-mode .character-relationships-section,
body.dark-mode .relationship-visualization {
  background-color: var(--dark-bg) !important;
  color: var(--dark-text) !important;
  border-color: var(--dark-border) !important;
}

/* Common table styles */
body.dark-mode table,
body.dark-mode #characterTable,
body.dark-mode #locationsTable,
body.dark-mode #plotsTable,
body.dark-mode #worldBuildingTable,
body.dark-mode #relationshipsTable,
body.dark-mode #databaseTable,
body.dark-mode .relationship-table {
  background-color: var(--dark-bg) !important;
  color: var(--dark-text) !important;
  border-color: var(--dark-border) !important;
}

body.dark-mode table th,
body.dark-mode #databaseTable th,
body.dark-mode .relationship-table th {
  background-color: var(--dark-bg-darker) !important;
  color: var(--dark-text) !important;
  border-color: var(--dark-border) !important;
}

body.dark-mode table td,
body.dark-mode #databaseTable td,
body.dark-mode .relationship-table td {
  border-color: var(--dark-border) !important;
  color: var(--dark-text) !important;
}

/* Form styles in dark mode */
body.dark-mode .form-group label {
  color: var(--dark-text) !important;
}

body.dark-mode .form-control:focus {
  border-color: var(--dark-accent) !important;
  box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2) !important;
}

/* Modal styles */
body.dark-mode .modal-content,
body.dark-mode #addPlotTypeDialog .modal-content,
body.dark-mode #addRelationshipTypeDialog .modal-content {
  background-color: var(--dark-bg) !important;
  color: var(--dark-text) !important;
  box-shadow: 0 0 15px rgba(0, 0, 0, 0.5) !important;
}

body.dark-mode .modal-header,
body.dark-mode #addPlotTypeDialog .modal-header,
body.dark-mode #addRelationshipTypeDialog .modal-header {
  border-bottom-color: var(--dark-border) !important;
}

body.dark-mode .modal-body,
body.dark-mode .modal-footer,
body.dark-mode #addPlotTypeDialog .modal-body,
body.dark-mode #addPlotTypeDialog .modal-footer,
body.dark-mode #addRelationshipTypeDialog .modal-body,
body.dark-mode #addRelationshipTypeDialog .modal-footer {
  background-color: var(--dark-bg) !important;
  border-color: var(--dark-border) !important;
}

/* White background inputs */
body.dark-mode #newDatabaseName,
body.dark-mode .new-database-input {
  background-color: #fff !important;
  color: #333 !important;
  border-color: #666 !important;
}

body.dark-mode .new-database-input::placeholder {
  color: #777 !important;
}

/* Plot card styles */
body.dark-mode .plot-card {
  background-color: var(--dark-bg-darker) !important;
  border-color: var(--dark-border) !important;
}

body.dark-mode .plot-card .title,
body.dark-mode .plot-card .description {
  color: var(--dark-text) !important;
}

/* Tab button styles */
body.dark-mode .tab-button {
  color: #e0e0e0;
  background-color: transparent;
  border-bottom: 3px solid transparent;
}

body.dark-mode .tab-button.active {
  background-color: var(--dark-bg-darker);
  color: var(--dark-accent) !important;
  border-bottom-color: var(--dark-accent) !important;
  font-weight: bold;
}

body.dark-mode .tab-button:hover:not(.active) {
  color: var(--dark-accent);
  background-color: rgba(52, 152, 219, 0.1);
  border-bottom-color: rgba(52, 152, 219, 0.3);
}

/* Cloud status styles */
.cloud-status-container {
  background: transparent !important;
  box-shadow: none !important;
  border: none !important;
  padding: 0 !important;
  margin: 0 !important;
}

.cloud-status {
  background-color: var(--dark-bg) !important;
  color: var(--dark-text) !important;
  border-radius: 5px !important;
  padding: 10px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2) !important;
}

.cloud-status i {
  color: var(--dark-text) !important;
  margin-right: 8px !important;
}

/* Fix character statistics in dark mode */
body.dark-mode .word-count,
body.dark-mode .character-count,
body.dark-mode .page-count,
body.dark-mode .words-per-sentence,
body.dark-mode .reading-time {
  color: #f8f9fa;
}

/* Fix character cards in dark mode */
body.dark-mode .character-card {
  background-color: #495057;
  color: #f8f9fa;
}

body.dark-mode .character-mentions,
body.dark-mode .character-variants {
  color: #e2e2e2;
}

body.dark-mode .variant-tag {
  background-color: #6c757d;
  color: #f8f9fa;
}

/* Fix file drop area in dark mode */
body.dark-mode .file-drop-area {
  background-color: #495057;
  border-color: #6c757d;
}

body.dark-mode .file-drop-area:hover {
  background-color: #424649;
}

body.dark-mode .file-msg {
  color: #f8f9fa;
}

body.dark-mode .drop-icon {
  color: #5dade2;
}

/* Fix checkboxes and option text */
body.dark-mode .checkbox-option {
  color: #f8f9fa;
}

/* Fix uploaded files */
body.dark-mode .uploaded-file {
  background-color: #495057;
  color: #f8f9fa;
}

/* Fix loading indicator */
body.dark-mode .progress-container {
  background-color: #495057;
}

body.dark-mode .progress-bar {
  background-color: #5dade2;
}

body.dark-mode .progress-text {
  color: #f8f9fa;
}

/* Improve character table visibility */
body.dark-mode .character-analysis-table {
  border: 1px solid #6c757d;
}

body.dark-mode .character-analysis-table th {
  background-color: #343a40;
  color: #f8f9fa;
  border: 1px solid #6c757d;
}

body.dark-mode .character-analysis-table td {
  background-color: #495057;
  color: #f8f9fa;
  border: 1px solid #6c757d;
}

/* Series and Book column highlighting */
body.dark-mode .character-analysis-table .series-column,
body.dark-mode .character-analysis-table .book-column {
  background-color: #2c3e50;
  color: #f8f9fa;
  border: 1px solid #5dade2;
}

/* Fix relationship type label */
body.dark-mode .relationship-type-label {
  background-color: #495057 !important;
  color: #f8f9fa !important;
  padding: 8px !important;
  border-radius: 4px !important;
  text-align: center !important;
}

/* Fix Database Manager in dark mode */
body.dark-mode .modal-header h3 {
  color: #f8f9fa !important;
}

/* Fix relationship buttons */
body.dark-mode .info-btn {
  color: #5dade2;
}

/* Fix Plot Type dialog in dark mode */
body.dark-mode #addPlotTypeDialog input[type="text"]::placeholder {
  color: #adb5bd !important;
}

body.dark-mode #addPlotTypeDialog label {
  color: #f8f9fa !important;
}

/* Fix world-building visualization container in dark mode */
body.dark-mode .plot-card {
  background-color: #2d3338 !important;
  border-color: #495057 !important;
}

body.dark-mode .plot-card .title,
body.dark-mode .plot-card .description {
  color: #f8f9fa !important;
}

/* Relationship options container and buttons */
body.dark-mode .relationship-options {
  background-color: var(--dark-bg) !important;
  border-color: var(--dark-border) !important;
  padding: 10px !important;
  border-radius: var(--border-radius) !important;
}

body.dark-mode .relationship-option {
  border: 1px solid var(--dark-border) !important;
  margin-bottom: 5px !important;
  padding: 8px 12px !important;
  border-radius: var(--border-radius-sm) !important;
  cursor: pointer !important;
  transition: all 0.2s ease !important;
}

body.dark-mode .relationship-option:hover {
  filter: brightness(1.1) !important;
  transform: translateY(-1px) !important;
}

body.dark-mode .relationship-option.selected,
body.dark-mode .selected-relationship {
  border: 3px solid #fff !important;
  box-shadow: 0 0 5px rgba(255, 255, 255, 0.4) !important;
  transform: translateY(-2px) !important;
}

/* Relationship visualization reset button */
body.dark-mode .reset-zoom-btn {
  background-color: var(--dark-accent) !important;
  color: white !important;
  border: 1px solid var(--dark-border) !important;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3) !important;
}

body.dark-mode .reset-zoom-btn:hover {
  background-color: var(--dark-accent-hover) !important;
}

/* Color picker dialog dark mode */
body.dark-mode #relationshipColorPickerDialog .modal-content {
  background-color: var(--dark-bg) !important;
  color: var(--dark-text) !important;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5) !important;
}

body.dark-mode #relationshipColorPickerDialog .modal-header,
body.dark-mode #relationshipColorPickerDialog .modal-footer {
  border-color: var(--dark-border) !important;
}

body.dark-mode #relationshipColorPickerDialog .dialog-close-btn {
  background-color: var(--dark-bg-lighter) !important;
  color: var(--dark-text) !important;
  border-color: var(--dark-border) !important;
}

body.dark-mode #relationshipColorPickerDialog .dialog-close-btn:hover {
  background-color: var(--dark-border) !important;
}

body.dark-mode #relationshipColorPickerDialog .close-btn {
  color: var(--dark-text) !important;
}

body.dark-mode #relationshipColorPickerDialog .close-btn:hover {
  color: var(--dark-accent) !important;
}

body.dark-mode #relationshipColorPickerDialog .color-preview-box {
  border-color: var(--dark-border) !important;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3) !important;
}

body.dark-mode #relationshipColorPickerDialog .color-value-input {
  background-color: var(--dark-bg-lighter) !important;
  color: var(--dark-text) !important;
  border-color: var(--dark-border) !important;
}

body.dark-mode #relationshipColorPickerDialog .save-btn,
body.dark-mode #relationshipColorPickerDialog .cancel-btn {
  border: 1px solid var(--dark-border) !important;
} 